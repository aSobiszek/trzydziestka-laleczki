<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ff6b6b">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîê</text></svg>">
    <title>RozwiƒÖ≈º rebus!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            overflow-x: hidden;
            height: 100%;
        }

        body {
            font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fdfcfb 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            -webkit-tap-highlight-color: transparent;
        }

        .card {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 28px;
            padding: 40px 28px;
            width: 85%;
            max-width: 520px;
            min-height: 85vh;
            text-align: center;
            box-shadow: 0 8px 40px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .card-title { font-size: 2rem; font-weight: 800; color: #d63384; margin-bottom: 8px; }
        .card-sub { font-size: 1.1rem; color: #888; font-weight: 600; margin-bottom: 36px; }

        .rebus-section { margin-bottom: 28px; width: 100%; }
        .rebus-label { font-size: 0.9rem; font-weight: 700; color: #aaa; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 14px; }
        .rebus-row { display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 18px; flex-wrap: wrap; }
        .rebus-item { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .rebus-symbol { font-size: 3.5rem; line-height: 1; }
        .rebus-hint { font-size: 0.75rem; color: #bbb; font-weight: 600; }
        .rebus-op { font-size: 2.8rem; font-weight: 800; color: #d63384; line-height: 1; }

        .chrobry-text {
            font-family: 'Times New Roman', Georgia, serif;
            font-size: 3.2rem;
            font-weight: bold;
            color: #8B6914;
            text-shadow: 0 2px 6px rgba(139,105,20,0.3);
            letter-spacing: 1px;
        }

        .roman-x {
            font-family: 'Times New Roman', Georgia, serif;
            font-size: 3.8rem;
            font-weight: bold;
            font-style: italic;
            color: #555;
        }

        .barbie-logo {
            font-family: 'Brush Script MT', 'Segoe Script', 'Dancing Script', cursive;
            color: #e0218a;
            font-size: 3.4rem;
            font-weight: bold;
            text-shadow: 0 2px 8px rgba(224,33,138,0.3);
            letter-spacing: 1px;
        }

        .input-group { margin-bottom: 20px; width: 100%; max-width: 380px; margin-left: auto; margin-right: auto; }
        .input-group label { display: block; font-size: 0.85rem; font-weight: 700; color: #999; text-align: left; margin-bottom: 6px; padding-left: 4px; }
        .input-group input {
            width: 100%; padding: 16px 18px; border: 2px solid #eee; border-radius: 14px;
            font-family: 'Quicksand', sans-serif; font-size: 1.2rem; font-weight: 700; color: #333;
            outline: none; transition: border-color 0.2s; background: rgba(255,255,255,0.8);
        }
        .input-group input:focus { border-color: #d63384; }
        .input-group input.error { border-color: #ef5350; animation: shake 0.4s ease; }
        .input-group input.success { border-color: #4caf50; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-4px); }
        }

        .btn-check {
            display: inline-block; padding: 16px 48px; border-radius: 50px; border: none;
            background: linear-gradient(135deg, #d63384, #f06292); color: white;
            font-family: 'Quicksand', sans-serif; font-size: 1.2rem; font-weight: 800;
            cursor: pointer; margin-top: 12px; transition: transform 0.15s;
            box-shadow: 0 4px 15px rgba(214,51,132,0.3);
        }
        .btn-check:active { transform: scale(0.95); }

        .error-msg { color: #ef5350; font-size: 0.95rem; font-weight: 700; margin-top: 14px; min-height: 1.2em; }

        .divider { width: 80px; height: 3px; background: linear-gradient(90deg, #d63384, #f06292); border-radius: 3px; margin: 24px auto; }

        /* ===== SUCCESS OVERLAY ===== */
        .success-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fdfcfb 100%);
            z-index: 500;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }
        .success-overlay.open { display: flex; }
        .success-emoji { font-size: 5rem; animation: bounceIn 0.6s ease; }
        .success-title {
            font-size: 2.2rem; font-weight: 800; color: #d63384;
            animation: fadeInUp 0.6s ease 0.3s both;
        }
        .success-sub {
            font-size: 1.1rem; font-weight: 600; color: #888;
            animation: fadeInUp 0.6s ease 0.6s both;
        }
        .success-hint {
            font-size: 0.85rem; font-weight: 600; color: #aaa;
            animation: fadeInUp 0.6s ease 1.5s both;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            60% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== CONFETTI ===== */
        .confetti-piece {
            position: fixed; top: -20px; z-index: 600; pointer-events: none;
            animation: confetti-fall linear forwards;
        }
        @keyframes confetti-fall {
            to { transform: translateY(110vh) rotate(1080deg); opacity: 0; }
        }

        @media (max-width: 480px) {
            .card {
                width: 92%;
                padding: 28px 18px;
                min-height: 80vh;
            }
            .card-title { font-size: 1.7rem; }
            .chrobry-text { font-size: 2.6rem; }
            .roman-x { font-size: 3rem; }
            .barbie-logo { font-size: 2.8rem; }
            .rebus-op { font-size: 2.2rem; }
        }
    </style>
</head>
<body>

    <div class="card" id="card">
        <div class="card-title">üîê RozwiƒÖ≈º rebus!</div>
        <div class="card-sub">Odgadnij dwa s≈Çowa, ≈ºeby odblokowaƒá prezent</div>

        <!-- REBUS 1: trzydziestka -->
        <div class="rebus-section">
            <div class="rebus-label">S≈Çowo 1</div>
            <div class="rebus-row">
                <div class="rebus-item">
                    <div class="chrobry-text">Chrobry</div>
                    <div class="rebus-hint">co reprezentuje?</div>
                </div>
                <div class="rebus-op">+</div>
                <div class="rebus-item">
                    <div class="roman-x">X</div>
                </div>
            </div>
            <div class="input-group">
                <label>Co wychodzi?</label>
                <input type="text" id="word1" placeholder="_ _ _ _ _ _ _ _ _ _ _ _" autocomplete="off" autocapitalize="none" spellcheck="false">
            </div>
        </div>

        <div class="divider"></div>

        <!-- REBUS 2: laleczki -->
        <div class="rebus-section">
            <div class="rebus-label">S≈Çowo 2</div>
            <div class="rebus-row">
                <div class="rebus-item">
                    <div class="barbie-logo">Barbie</div>
                    <div class="rebus-hint">po polsku, w liczbie mnogiej?</div>
                </div>
            </div>
            <div class="input-group">
                <label>A to co?</label>
                <input type="text" id="word2" placeholder="_ _ _ _ _ _ _ _" autocomplete="off" autocapitalize="none" spellcheck="false">
            </div>
        </div>

        <button class="btn-check" id="checkBtn" onclick="checkAnswer()">Sprawd≈∫! üéØ</button>
        <div class="error-msg" id="errorMsg"></div>
    </div>

    <!-- Success overlay -->
    <div class="success-overlay" id="successOverlay">
        <div class="success-emoji">üéâ</div>
        <div class="success-title">Brawo! Odgad≈Ça≈õ!</div>
        <div class="success-sub">Masz filmik do obejrzenia...</div>
        <div class="success-hint">Za chwilƒô przejdziesz do Bingo!</div>
    </div>

    <script>
    const HASH_1 = 'ae851eaa05b559f247142f0d3b3b38e2302d6f81f1fa96344af59aede40eff22';
    const HASH_2 = '41815dbd24a2d33502be26ee3de537745bae0503b772bf1df56b33240e01ff6c';

    async function sha256(text) {
        const data = new TextEncoder().encode(text);
        const hash = await crypto.subtle.digest('SHA-256', data);
        return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function checkAnswer() {
        const w1 = document.getElementById('word1').value.trim().toLowerCase();
        const w2 = document.getElementById('word2').value.trim().toLowerCase();
        const errEl = document.getElementById('errorMsg');

        if (!w1 || !w2) { errEl.textContent = 'Wpisz oba s≈Çowa!'; return; }

        const h1 = await sha256(w1);
        const h2 = await sha256(w2);
        const ok1 = h1 === HASH_1;
        const ok2 = h2 === HASH_2;

        document.getElementById('word1').className = ok1 ? 'success' : 'error';
        document.getElementById('word2').className = ok2 ? 'success' : 'error';

        if (ok1 && ok2) {
            errEl.textContent = '';
            spawnConfetti();
            setTimeout(() => showSuccess(), 1200);
        } else {
            const wrong = [];
            if (!ok1) wrong.push('pierwsze');
            if (!ok2) wrong.push('drugie');
            errEl.textContent = 'Hmm, ' + wrong.join(' i ') + ' s≈Çowo nie pasuje... spr√≥buj jeszcze raz!';
        }
    }

    // ===== SUCCESS + VIDEO =====
    function showSuccess() {
        document.getElementById('successOverlay').classList.add('open');

        // Open video in new tab after 2s
        setTimeout(function() {
            window.open('https://www.youtube.com/watch?v=wF5RuUPrdXg', '_blank');
        }, 2000);

        // Redirect to bingo after 5s
        setTimeout(function() {
            window.location.href = 'index.html';
        }, 5000);
    }

    // ===== CONFETTI =====
    function spawnConfetti() {
        const colors = ['#f44336','#e91e63','#9c27b0','#2196f3','#4caf50','#ffeb3b','#ff9800','#e0218a','#ba68c8'];
        for (let i = 0; i < 100; i++) {
            const el = document.createElement('div');
            el.className = 'confetti-piece';
            el.style.left = Math.random() * 100 + 'vw';
            el.style.background = colors[Math.floor(Math.random() * colors.length)];
            el.style.animationDuration = (2 + Math.random() * 3) + 's';
            el.style.animationDelay = Math.random() * 1.5 + 's';
            el.style.width = (6 + Math.random() * 10) + 'px';
            el.style.height = (6 + Math.random() * 10) + 'px';
            el.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
            document.body.appendChild(el);
        }
    }

    // Enter key submits
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('keydown', e => {
            if (e.key === 'Enter') checkAnswer();
            input.className = '';
        });
        input.addEventListener('input', () => {
            input.className = '';
            document.getElementById('errorMsg').textContent = '';
        });
    });
    </script>
</body>
</html>
